<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Bebek Balap Geometri - Sound Edition</title>
    <style>
        body { margin: 0; font-family: 'Arial Rounded MT Bold', sans-serif; background: #e1f5fe; overflow: hidden; }
        .header { background: #0288d1; color: white; text-align: center; padding: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        #game-container { display: flex; height: calc(100vh - 70px); transition: filter 0.5s; }
        .player-side { flex: 1; display: flex; flex-direction: column; border: 3px solid #01579b; background: white; }

        /* Lintasan */
        .track { height: 120px; background: #a5d6a7; position: relative; border-bottom: 5px solid #4caf50; }
        .finish-line { position: absolute; right: 40px; top: 0; bottom: 0; width: 15px; background: repeating-linear-gradient(black 0 10px, white 10px 20px); }
        
        /* Bebek */
        .duck-container { width: 70px; position: absolute; bottom: 15px; left: 20px; transition: left 0.8s linear; text-align: center; }
        .duck-body { font-size: 55px; display: inline-block; transform: scaleX(-1); transition: transform 0.2s; }
        .duck-name { font-size: 12px; background: #ffd600; padding: 2px 6px; border-radius: 4px; font-weight: bold; color: black; margin-bottom: 5px; display: block; }

        /* Kuis */
        .quiz-area { padding: 30px; text-align: center; flex-grow: 1; }
        .question { font-size: 20px; font-weight: bold; margin-bottom: 25px; color: #333; height: 60px; }
        .options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; max-width: 450px; margin: auto; }
        
        button { padding: 18px; font-size: 16px; cursor: pointer; border: 2px solid #0288d1; border-radius: 12px; background: #f1f8ff; font-weight: bold; transition: 0.2s; }
        button:hover { background: #0288d1; color: white; }

        /* Layar Menang */
        #win-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 34, 68, 0.95); z-index: 100; color: white;
            flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }
        .congrats-btn { padding: 15px 40px; font-size: 20px; cursor: pointer; border-radius: 30px; border: none; background: #4caf50; color: white; margin-top: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
    </style>
</head>
<body>

<div class="header"><h1>ðŸ¦† BEBEK BALAP GEOMETRI ðŸ¦†</h1></div>

<div id="game-container">
    <div class="player-side">
        <div class="track"><div class="finish-line"></div><div id="duck1" class="duck-container"><span class="duck-name">PEMAIN 1</span><span class="duck-body">ðŸ¦†</span></div></div>
        <div class="quiz-area"><div id="q1" class="question">Siap?</div><div id="opt1" class="options"></div><div style="margin-top:10px">Progres: <span id="s1">0</span>/25</div></div>
    </div>
    <div class="player-side">
        <div class="track"><div class="finish-line"></div><div id="duck2" class="duck-container"><span class="duck-name">PEMAIN 2</span><span class="duck-body">ðŸ¦†</span></div></div>
        <div class="quiz-area"><div id="q2" class="question">Siap?</div><div id="opt2" class="options"></div><div style="margin-top:10px">Progres: <span id="s2">0</span>/25</div></div>
    </div>
</div>

<div id="win-screen">
    <h1 style="font-size: 60px; color: #ffeb3b; margin: 0;">ðŸŽ‰ CONGRATULATIONS! ðŸŽ‰</h1>
    <h2 id="winner-msg" style="font-size: 30px;">Pemain Menang!</h2>
    <p style="font-size: 20px;">Kamu adalah ahli Geometri sejati!</p>
    <button onclick="location.reload()" class="congrats-btn">Main Lagi</button>
</div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // Fungsi Musik Kemenangan (Melodi Ceria)
    function playVictoryMusic() {
        const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
        notes.forEach((freq, i) => {
            setTimeout(() => {
                const osc = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                osc.type = 'square';
                osc.frequency.value = freq;
                g.gain.setValueAtTime(0.1, audioCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
                osc.connect(g); g.connect(audioCtx.destination);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            }, i * 150);
        });
    }

    // Suara Benar (Kwek) & Salah (Oh No)
    function playVoice(text, pitch) {
        const u = new SpeechSynthesisUtterance(text);
        u.pitch = pitch;
        u.rate = 1.2;
        window.speechSynthesis.speak(u);
    }

    const soalList = [
        { q: "Bangun datar dengan 4 sisi sama panjang adalah...", a: ["Persegi", "Segitiga", "Lingkaran", "Trapesium"], c: 0 },
        { q: "Berapa jumlah sudut pada Segitiga?", a: ["2", "3", "4", "5"], c: 1 },
        { q: "Bentuk roda sepeda adalah...", a: ["Kotak", "Segitiga", "Lingkaran", "Bintang"], c: 2 },
        { q: "Benda yang berbentuk kubus adalah...", a: ["Lemari", "Dadu", "Bola", "Botol"], c: 1 },
        { q: "Sisi pada kubus berjumlah...", a: ["4", "6", "8", "12"], c: 1 },
        { q: "Kaleng susu berbentuk tabung. Alasnya berbentuk...", a: ["Lingkaran", "Persegi", "Segitiga", "Oval"], c: 0 },
        { q: "Atap rumah tenda biasanya berbentuk...", a: ["Segitiga", "Lingkaran", "Oval", "Persegi"], c: 0 },
        { q: "Bangun ruang yang bulat sempurna adalah...", a: ["Bola", "Tabung", "Kubus", "Balok"], c: 0 },
        { q: "Topi ulang tahun berbentuk...", a: ["Kerucut", "Tabung", "Bola", "Balok"], c: 0 },
        { q: "Bangun datar dengan 4 sisi dan 4 sudut siku-siku...", a: ["Persegi Panjang", "Trapesium", "Segitiga", "Oval"], c: 0 },
        { q: "Berapa banyak titik sudut pada Balok?", a: ["6", "8", "10", "12"], c: 1 },
        { q: "Uang koin berbentuk...", a: ["Persegi", "Lingkaran", "Segitiga", "Bintang"], c: 1 },
        { q: "Berapa jumlah rusuk pada Kubus?", a: ["6", "8", "10", "12"], c: 3 },
        { q: "Pintu kelas umumnya berbentuk...", a: ["Persegi Panjang", "Lingkaran", "Segitiga", "Segilima"], c: 0 },
        { q: "Bangun ruang yang punya satu puncak lancip adalah...", a: ["Kerucut", "Tabung", "Bola", "Balok"], c: 0 },
        { q: "Buku gambar berbentuk...", a: ["Persegi Panjang", "Segitiga", "Lingkaran", "Bola"], c: 0 },
        { q: "Sisi tabung bagian bawah berbentuk...", a: ["Segitiga", "Lingkaran", "Persegi", "Kotak"], c: 1 },
        { q: "Bangun datar dengan 5 sudut disebut...", a: ["Segitiga", "Segiempat", "Segilima", "Segienam"], c: 2 },
        { q: "Dadu memiliki sisi yang berbentuk...", a: ["Persegi", "Lingkaran", "Segitiga", "Oval"], c: 0 },
        { q: "Tenda pramuka adalah contoh prisma...", a: ["Segitiga", "Segiempat", "Lingkaran", "Bola"], c: 0 },
        { q: "Bangun datar tanpa sudut adalah...", a: ["Persegi", "Lingkaran", "Segitiga", "Trapesium"], c: 1 },
        { q: "Kotak kado panjang berbentuk...", a: ["Balok", "Kubus", "Bola", "Kerucut"], c: 0 },
        { q: "Berapa diagonal pada persegi?", a: ["1", "2", "3", "4"], c: 1 },
        { q: "Layang-layang termasuk bangun...", a: ["Datar", "Ruang", "Lengkung", "Bola"], c: 0 },
        { q: "Bangun datar dengan 3 sisi disebut...", a: ["Segitiga", "Segilima", "Segiempat", "Segienam"], c: 0 }
    ];

    let p1P = 0, p2P = 0, isEnd = false;

    function render(p) {
        if(isEnd) return;
        const pt = p === 1 ? p1P : p2P;
        const qE = document.getElementById(p === 1 ? 'q1' : 'q2');
        const oE = document.getElementById(p === 1 ? 'opt1' : 'opt2');

        if (pt >= soalList.length) {
            isEnd = true;
            finishGame(p);
            return;
        }

        qE.innerText = (pt+1) + ". " + soalList[pt].q;
        oE.innerHTML = "";
        soalList[pt].a.forEach((t, i) => {
            const b = document.createElement('button');
            b.innerText = t;
            b.onclick = () => { 
                if(audioCtx.state === 'suspended') audioCtx.resume(); 
                check(p, i); 
            };
            oE.appendChild(b);
        });
    }

    function check(p, choice) {
        const pt = p === 1 ? p1P : p2P;
        if (choice === soalList[pt].c) {
            playVoice("Kwek!", 2);
            if (p === 1) p1P++; else p2P++;
            document.getElementById(p === 1 ? 's1' : 's2').innerText = (p === 1 ? p1P : p2P);
            move(p);
            render(p);
        } else {
            playVoice("Oh no!", 0.5); // Suara Oh No jika salah
        }
    }

    function move(p) {
        const d = document.getElementById(p === 1 ? 'duck1' : 'duck2');
        const body = d.querySelector('.duck-body');
        const pt = p === 1 ? p1P : p2P;
        const trackW = document.querySelector('.track').clientWidth - 120;
        d.style.left = (20 + (pt / 25) * trackW) + "px";
        
        body.style.transform = "scaleX(-1) rotate(10deg)";
        setTimeout(() => body.style.transform = "scaleX(-1) rotate(-10deg)", 200);
        setTimeout(() => body.style.transform = "scaleX(-1) rotate(0deg)", 400);
    }

    function finishGame(p) {
        playVictoryMusic();
        playVoice("Congratulations! Player " + p + " wins!", 1);
        document.getElementById('win-screen').style.display = 'flex';
        document.getElementById('game-container').style.filter = 'blur(5px)';
        document.getElementById('winner-msg').innerText = "ðŸ¦† BEBEK PEMAIN " + p + " JUARA! ðŸ¦†";
    }

    render(1); render(2);
</script>
</body>
</html>